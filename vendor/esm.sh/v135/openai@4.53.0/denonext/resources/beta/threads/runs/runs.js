/* esm.sh - esbuild bundle(openai@4.53.0/resources/beta/threads/runs/runs) denonext production */
import{APIResource as d}from"/v135/openai@4.53.0/denonext/resource.js";import{isRequestOptions as A}from"/v135/openai@4.53.0/denonext/core.js";import{AssistantStream as h}from"/v135/openai@4.53.0/denonext/lib/AssistantStream.js";import{sleep as I}from"/v135/openai@4.53.0/denonext/core.js";import*as i from"/v135/openai@4.53.0/denonext/resources/beta/threads/runs/steps.js";import{CursorPage as S}from"/v135/openai@4.53.0/denonext/pagination.js";var u=class extends d{constructor(){super(...arguments),this.steps=new i.Steps(this._client)}create(t,s,e){return this._client.post(`/threads/${t}/runs`,{body:s,...e,headers:{"OpenAI-Beta":"assistants=v2",...e?.headers},stream:s.stream??!1})}retrieve(t,s,e){return this._client.get(`/threads/${t}/runs/${s}`,{...e,headers:{"OpenAI-Beta":"assistants=v2",...e?.headers}})}update(t,s,e,a){return this._client.post(`/threads/${t}/runs/${s}`,{body:e,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(t,s={},e){return A(s)?this.list(t,{},s):this._client.getAPIList(`/threads/${t}/runs`,n,{query:s,...e,headers:{"OpenAI-Beta":"assistants=v2",...e?.headers}})}cancel(t,s,e){return this._client.post(`/threads/${t}/runs/${s}/cancel`,{...e,headers:{"OpenAI-Beta":"assistants=v2",...e?.headers}})}async createAndPoll(t,s,e){let a=await this.create(t,s,e);return await this.poll(t,a.id,e)}createAndStream(t,s,e){return h.createAssistantStream(t,this._client.beta.threads.runs,s,e)}async poll(t,s,e){let a={...e?.headers,"X-Stainless-Poll-Helper":"true"};for(e?.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=e.pollIntervalMs.toString());;){let{data:l,response:m}=await this.retrieve(t,s,{...e,headers:{...e?.headers,...a}}).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(e?.pollIntervalMs)c=e.pollIntervalMs;else{let p=m.headers.get("openai-poll-after-ms");if(p){let o=parseInt(p);isNaN(o)||(c=o)}}await I(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}}stream(t,s,e){return h.createAssistantStream(t,this._client.beta.threads.runs,s,e)}submitToolOutputs(t,s,e,a){return this._client.post(`/threads/${t}/runs/${s}/submit_tool_outputs`,{body:e,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers},stream:e.stream??!1})}async submitToolOutputsAndPoll(t,s,e,a){let l=await this.submitToolOutputs(t,s,e,a);return await this.poll(t,l.id,a)}submitToolOutputsStream(t,s,e,a){return h.createToolAssistantStream(t,s,this._client.beta.threads.runs,e,a)}},n=class extends S{};(function(r){r.RunsPage=n,r.Steps=i.Steps,r.RunStepsPage=i.RunStepsPage})(u||(u={}));export{u as Runs,n as RunsPage};
//# sourceMappingURL=runs.js.map