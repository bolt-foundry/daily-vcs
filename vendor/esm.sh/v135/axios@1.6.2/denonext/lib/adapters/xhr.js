/* esm.sh - esbuild bundle(axios@1.6.2/lib/adapters/xhr) denonext production */
import R from"/v135/axios@1.6.2/denonext/unsafe/utils.js";import k from"/v135/axios@1.6.2/denonext/unsafe/core/settle.js";import L from"/v135/axios@1.6.2/denonext/unsafe/helpers/cookies.js";import N from"/v135/axios@1.6.2/denonext/unsafe/helpers/buildURL.js";import c from"/v135/axios@1.6.2/denonext/unsafe/core/buildFullPath.js";import v from"/v135/axios@1.6.2/denonext/unsafe/helpers/isURLSameOrigin.js";import D from"/v135/axios@1.6.2/denonext/unsafe/defaults/transitional.js";import u from"/v135/axios@1.6.2/denonext/unsafe/core/AxiosError.js";import q from"/v135/axios@1.6.2/denonext/unsafe/cancel/CanceledError.js";import A from"/v135/axios@1.6.2/denonext/unsafe/helpers/parseProtocol.js";import h from"/v135/axios@1.6.2/denonext/unsafe/platform.js";import C from"/v135/axios@1.6.2/denonext/unsafe/core/AxiosHeaders.js";import O from"/v135/axios@1.6.2/denonext/unsafe/helpers/speedometer.js";function H(e,y){let f=0,l=O(50,250);return i=>{let s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-f,n=l(a),E=s<=o;f=s;let m={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:n||void 0,estimated:n&&o&&E?(o-s)/n:void 0,event:i};m[y?"download":"upload"]=!0,e(m)}}var S=typeof XMLHttpRequest<"u",G=S&&function(e){return new Promise(function(f,l){let i=e.data,s=C.from(e.headers).normalize(),{responseType:o,withXSRFToken:a}=e,n;function E(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}let m;if(R.isFormData(i)){if(h.hasStandardBrowserEnv||h.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((m=s.getContentType())!==!1){let[r,...d]=m?m.split(";").map(p=>p.trim()).filter(Boolean):[];s.setContentType([r||"multipart/form-data",...d].join("; "))}}let t=new XMLHttpRequest;if(e.auth){let r=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(r+":"+d))}let T=c(e.baseURL,e.url);t.open(e.method.toUpperCase(),N(T,e.params,e.paramsSerializer),!0),t.timeout=e.timeout;function x(){if(!t)return;let r=C.from("getAllResponseHeaders"in t&&t.getAllResponseHeaders()),p={data:!o||o==="text"||o==="json"?t.responseText:t.response,status:t.status,statusText:t.statusText,headers:r,config:e,request:t};k(function(b){f(b),E()},function(b){l(b),E()},p),t=null}if("onloadend"in t?t.onloadend=x:t.onreadystatechange=function(){!t||t.readyState!==4||t.status===0&&!(t.responseURL&&t.responseURL.indexOf("file:")===0)||setTimeout(x)},t.onabort=function(){t&&(l(new u("Request aborted",u.ECONNABORTED,e,t)),t=null)},t.onerror=function(){l(new u("Network Error",u.ERR_NETWORK,e,t)),t=null},t.ontimeout=function(){let d=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",p=e.transitional||D;e.timeoutErrorMessage&&(d=e.timeoutErrorMessage),l(new u(d,p.clarifyTimeoutError?u.ETIMEDOUT:u.ECONNABORTED,e,t)),t=null},h.hasStandardBrowserEnv&&(a&&R.isFunction(a)&&(a=a(e)),a||a!==!1&&v(T))){let r=e.xsrfHeaderName&&e.xsrfCookieName&&L.read(e.xsrfCookieName);r&&s.set(e.xsrfHeaderName,r)}i===void 0&&s.setContentType(null),"setRequestHeader"in t&&R.forEach(s.toJSON(),function(d,p){t.setRequestHeader(p,d)}),R.isUndefined(e.withCredentials)||(t.withCredentials=!!e.withCredentials),o&&o!=="json"&&(t.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&t.addEventListener("progress",H(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&t.upload&&t.upload.addEventListener("progress",H(e.onUploadProgress)),(e.cancelToken||e.signal)&&(n=r=>{t&&(l(!r||r.type?new q(null,e,t):r),t.abort(),t=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n)));let w=A(T);if(w&&h.protocols.indexOf(w)===-1){l(new u("Unsupported protocol "+w+":",u.ERR_BAD_REQUEST,e));return}t.send(i||null)})};export{G as default};

import "https://deno.land/x/xhr@0.3.0/mod.ts";//# sourceMappingURL=xhr.js.map