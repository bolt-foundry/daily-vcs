/* esm.sh - esbuild bundle(stripe@12.18.0) denonext production */
import __Process$ from "node:process";
var Ko=Object.defineProperty;var yt=(r,e)=>{for(var o in e)Ko(r,o,{get:e[o],enumerable:!0})};var C=class r{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,o,s,n,i,l,u,c){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){let e=new TypeError(r.TIMEOUT_ERROR_CODE);return e.code=r.TIMEOUT_ERROR_CODE,e}};C.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];C.TIMEOUT_ERROR_CODE="ETIMEDOUT";var U=class{constructor(e,o){this._statusCode=e,this._headers=o}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}};var xe=class extends C{constructor(e){super(),this._fetchFn=e}getClientName(){return"fetch"}makeRequest(e,o,s,n,i,l,u,c){let a=u==="http",h=new URL(s,`${a?"http":"https"}://${e}`);h.port=o;let p=n=="POST"||n=="PUT"||n=="PATCH",m=l||(p?"":void 0),P=(this._fetchFn||fetch)(h.toString(),{method:n,headers:i,body:m}),T,f=new Promise((_,x)=>{T=setTimeout(()=>{T=null,x(C.makeTimeoutError())},c)});return Promise.race([P,f]).then(_=>new rt(_)).finally(()=>{T&&clearTimeout(T)})}},rt=class r extends U{constructor(e){super(e.status,r._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let o={};for(let s of e){if(!Array.isArray(s)||s.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");o[s[0]]=s[1]}return o}};var F=class{computeHMACSignature(e,o){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,o){throw new Error("computeHMACSignatureAsync not implemented.")}},$=class extends Error{};var Se=class extends F{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,o){throw new $("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,o){let s=new TextEncoder,n=await this.subtleCrypto.importKey("raw",s.encode(o),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await this.subtleCrypto.sign("hmac",n,s.encode(e)),l=new Uint8Array(i),u=new Array(l.length);for(let c=0;c<l.length;c++)u[c]=ot[l[c]];return u.join("")}},ot=new Array(256);for(let r=0;r<ot.length;r++)ot[r]=r.toString(16).padStart(2,"0");var Oe=class{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let o=Math.random()*16|0;return(e==="x"?o:o&3|8).toString(16)})}secureCompare(e,o){if(e.length!==o.length)return!1;let s=e.length,n=0;for(let i=0;i<s;++i)n|=e.charCodeAt(i)^o.charCodeAt(i);return n===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new xe(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new Se(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}};var st=class extends Event{constructor(e,o){super(e),this.data=o}},Re=class{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(e,o){let s=n=>{o(n.data)};return this.listenerMapping.set(o,s),this.eventTarget.addEventListener(e,s)}removeListener(e,o){let s=this.listenerMapping.get(o);return this.listenerMapping.delete(o),this.eventTarget.removeEventListener(e,s)}once(e,o){let s=n=>{o(n.data)};return this.listenerMapping.set(o,s),this.eventTarget.addEventListener(e,s,{once:!0})}emit(e,o){return this.eventTarget.dispatchEvent(new st(e,o))}};var be=class extends Oe{getUname(){return Promise.resolve(null)}createEmitter(){return new Re}tryBufferData(e){if(e.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(e)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}};var Ie={};yt(Ie,{StripeAPIError:()=>j,StripeAuthenticationError:()=>V,StripeCardError:()=>Ce,StripeConnectionError:()=>re,StripeError:()=>g,StripeIdempotencyError:()=>Ae,StripeInvalidGrantError:()=>Ge,StripeInvalidRequestError:()=>we,StripePermissionError:()=>te,StripeRateLimitError:()=>B,StripeSignatureVerificationError:()=>w,StripeUnknownError:()=>Me,generate:()=>gt});var gt=r=>{switch(r.type){case"card_error":return new Ce(r);case"invalid_request_error":return new we(r);case"api_error":return new j(r);case"authentication_error":return new V(r);case"rate_limit_error":return new B(r);case"idempotency_error":return new Ae(r);case"invalid_grant":return new Ge(r);default:return new Me(r)}},g=class extends Error{constructor(e={}){super(e.message),this.type=this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}};g.generate=gt;var Ce=class extends g{},we=class extends g{},j=class extends g{},V=class extends g{},te=class extends g{},B=class extends g{},re=class extends g{},w=class extends g{constructor(e,o,s={}){super(s),this.header=e,this.payload=o}},Ae=class extends g{},Ge=class extends g{},Me=class extends g{};var Et="2022-11-15";var Ee={};yt(Ee,{Account:()=>ft,AccountLinks:()=>Hr,Accounts:()=>ft,ApplePayDomains:()=>Ur,ApplicationFees:()=>Fr,Apps:()=>Ts,Balance:()=>$r,BalanceTransactions:()=>Vr,BillingPortal:()=>_s,Charges:()=>Br,Checkout:()=>ys,CountrySpecs:()=>zr,Coupons:()=>Kr,CreditNotes:()=>Jr,Customers:()=>Yr,Disputes:()=>Qr,EphemeralKeys:()=>Zr,Events:()=>to,ExchangeRates:()=>oo,FileLinks:()=>so,Files:()=>io,FinancialConnections:()=>gs,Identity:()=>Es,InvoiceItems:()=>ao,Invoices:()=>lo,Issuing:()=>xs,Mandates:()=>uo,OAuth:()=>ho,PaymentIntents:()=>po,PaymentLinks:()=>mo,PaymentMethods:()=>fo,Payouts:()=>Po,Plans:()=>vo,Prices:()=>To,Products:()=>_o,PromotionCodes:()=>yo,Quotes:()=>go,Radar:()=>Ss,Refunds:()=>Eo,Reporting:()=>Os,Reviews:()=>xo,SetupAttempts:()=>So,SetupIntents:()=>Oo,ShippingRates:()=>Ro,Sigma:()=>Rs,Sources:()=>bo,SubscriptionItems:()=>Co,SubscriptionSchedules:()=>wo,Subscriptions:()=>Ao,Tax:()=>bs,TaxCodes:()=>Mo,TaxRates:()=>Io,Terminal:()=>Cs,TestHelpers:()=>ws,Tokens:()=>Do,Topups:()=>No,Transfers:()=>qo,Treasury:()=>As,WebhookEndpoints:()=>Lo});function Yo(r,e){for(let o in e){let s=o[0].toLowerCase()+o.substring(1),n=new e[o](r);this[s]=n}}function E(r,e){return function(o){return new Yo(o,e)}}import*as xt from"/v130/qs@6.11.2/denonext/qs.mjs";var nt=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host"];function St(r){return r&&typeof r=="object"&&nt.some(e=>Object.prototype.hasOwnProperty.call(r,e))}function D(r){return xt.stringify(r,{serializeDate:e=>Math.floor(e.getTime()/1e3).toString()}).replace(/%5B/g,"[").replace(/%5D/g,"]")}var ke=(()=>{let r={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{let o=e.replace(/["\n\r\u2028\u2029]/g,s=>r[s]);return s=>o.replace(/\{([\s\S]+?)\}/g,(n,i)=>encodeURIComponent(s[i]||""))}})();function Ot(r){let e=r.match(/\{\w+\}/g);return e?e.map(o=>o.replace(/[{}]/g,"")):[]}function De(r){if(!Array.isArray(r)||!r[0]||typeof r[0]!="object")return{};if(!St(r[0]))return r.shift();let e=Object.keys(r[0]),o=e.filter(s=>nt.includes(s));return o.length>0&&o.length!==e.length&&se(`Options found in arguments (${o.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function Rt(r){let e={auth:null,host:null,headers:{},settings:{}};if(r.length>0){let o=r[r.length-1];if(typeof o=="string")e.auth=r.pop();else if(St(o)){let s=Object.assign({},r.pop()),n=Object.keys(s).filter(i=>!nt.includes(i));n.length&&se(`Invalid options found (${n.join(", ")}); ignoring.`),s.apiKey&&(e.auth=s.apiKey),s.idempotencyKey&&(e.headers["Idempotency-Key"]=s.idempotencyKey),s.stripeAccount&&(e.headers["Stripe-Account"]=s.stripeAccount),s.apiVersion&&(e.headers["Stripe-Version"]=s.apiVersion),Number.isInteger(s.maxNetworkRetries)&&(e.settings.maxNetworkRetries=s.maxNetworkRetries),Number.isInteger(s.timeout)&&(e.settings.timeout=s.timeout),s.host&&(e.host=s.host)}}return e}function bt(r){let e=this,o=Object.prototype.hasOwnProperty.call(r,"constructor")?r.constructor:function(...s){e.apply(this,s)};return Object.assign(o,e),o.prototype=Object.create(e.prototype),Object.assign(o.prototype,r),o}function Ne(r){if(typeof r!="object")throw new Error("Argument must be an object");return Object.keys(r).reduce((e,o)=>(r[o]!=null&&(e[o]=r[o]),e),{})}function Ct(r){return r&&typeof r=="object"?Object.keys(r).reduce((e,o)=>(e[Qo(o)]=r[o],e),{}):r}function Qo(r){return r.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function oe(r,e){return e?r.then(o=>{setTimeout(()=>{e(null,o)},0)},o=>{setTimeout(()=>{e(o,null)},0)}):r}function wt(r){return r==="OAuth"?"oauth":r[0].toLowerCase()+r.substring(1)}function se(r){return typeof __Process$.emitWarning!="function"?console.warn(`Stripe: ${r}`):__Process$.emitWarning(r,"Stripe")}function Xo(r){let e=typeof r;return(e==="function"||e==="object")&&!!r}function At(r){let e={},o=(s,n)=>{Object.keys(s).forEach(i=>{let l=s[i],u=n?`${n}[${i}]`:i;if(Xo(l)){if(!(l instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(l,"data"))return o(l,u);e[u]=l}else e[u]=String(l)})};return o(r,null),e}function qe(r,e,o){if(!Number.isInteger(e)){if(o!==void 0)return o;throw new Error(`${r} must be an integer`)}return e}function Gt(){return typeof __Process$>"u"?{}:{lang_version:__Process$.version,platform:__Process$.platform}}var Le=class{constructor(e,o,s,n){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=o,this.spec=s,this.stripeResource=n}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let o=kt(this.requestArgs);if(this.index<e.data.length){let s=o?e.data.length-1-this.index:this.index,n=e.data[s];return this.index+=1,{value:n,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let s=await this.pagePromise;return this.iterate(s)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let o=await this._next();return this.promiseCache.currentPromise=null,o})();return this.promiseCache.currentPromise=e,e}},it=class extends Le{getNextPage(e){let o=kt(this.requestArgs),s=rs(e,o);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[o?"ending_before":"starting_after"]:s})}},at=class extends Le{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}},It=(r,e,o,s)=>o.methodType==="search"?Mt(new at(s,e,o,r)):o.methodType==="list"?Mt(new it(s,e,o,r)):null,Mt=r=>{let e=os((...n)=>r.next(...n)),o=ss(e),s={autoPagingEach:e,autoPagingToArray:o,next:()=>r.next(),return:()=>({}),[Zo()]:()=>s};return s};function Zo(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function es(r){if(r.length<2)return null;let e=r[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function ts(r){if(r.length===0)return;let e=r[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(s,n){let i=e(s);n(i)}}function rs(r,e){let o=e?0:r.data.length-1,s=r.data[o],n=s&&s.id;if(!n)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return n}function os(r){return function(){let o=[].slice.call(arguments),s=ts(o),n=es(o);if(o.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${o}`);let i=ns(r,s);return oe(i,n)}}function ss(r){return function(o,s){let n=o&&o.limit;if(!n)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(n>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let i=new Promise((l,u)=>{let c=[];r(a=>{if(c.push(a),c.length>=n)return!1}).then(()=>{l(c)}).catch(u)});return oe(i,s)}}function ns(r,e){return new Promise((o,s)=>{function n(i){if(i.done){o();return}let l=i.value;return new Promise(u=>{e(l,u)}).then(u=>u===!1?n({done:!0,value:void 0}):r().then(n))}r().then(n).catch(s)})}function kt(r){let e=[].slice.call(r);return!!De(e).ending_before}function Dt(r){if(r.path!==void 0&&r.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${r.path}) and a 'fullPath' (${r.fullPath}).`);return function(...e){let o=typeof e[e.length-1]=="function"&&e.pop();r.urlParams=Ot(r.fullPath||this.createResourcePathWithSymbols(r.path||""));let s=oe(this._makeRequest(e,r,{}),o);return Object.assign(s,It(this,e,r,s)),s}}t.extend=bt;t.method=Dt;t.MAX_BUFFERED_REQUEST_METRICS=100;function t(r,e){if(this._stripe=r,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=ke(this.basePath||r.getApiField("basePath")),this.resourcePath=this.path,this.path=ke(this.path),this.initialize(...arguments)}t.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(r,e){let o=[this.basePath(e),this.path(e)];if(typeof r=="function"){let s=r(e);s&&o.push(s)}else o.push(r);return this._joinUrlParts(o)},createResourcePathWithSymbols(r){return r?`/${this._joinUrlParts([this.resourcePath,r])}`:`/${this.resourcePath}`},_joinUrlParts(r){return r.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(r,e,o){let s=(e.method||"GET").toUpperCase(),n=e.urlParams||[],i=e.encode||(I=>I),l=!!e.fullPath,u=ke(l?e.fullPath:e.path||""),c=l?e.fullPath:this.createResourcePathWithSymbols(e.path),a=[].slice.call(r),h=n.reduce((I,R)=>{let ee=a.shift();if(typeof ee!="string")throw new Error(`Stripe: Argument "${R}" must be a string, but got: ${ee} (on API request to \`${s} ${c}\`)`);return I[R]=ee,I},{}),p=De(a),m=i(Object.assign({},p,o)),d=Rt(a),P=d.host||e.host,T=!!e.streaming;if(a.filter(I=>I!=null).length)throw new Error(`Stripe: Unknown arguments (${a}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${s} \`${c}\`)`);let f=l?u(h):this.createFullPath(u,h),_=Object.assign(d.headers,e.headers);e.validator&&e.validator(m,{headers:_});let x=e.method==="GET"||e.method==="DELETE";return{requestMethod:s,requestPath:f,bodyData:x?{}:m,queryData:x?m:{},auth:d.auth,headers:_,host:P??null,streaming:T,settings:d.settings}},_makeRequest(r,e,o){return new Promise((s,n)=>{var i;let l;try{l=this._getRequestOpts(r,e,o)}catch(m){n(m);return}function u(m,d){m?n(m):s(e.transformResponseData?e.transformResponseData(d):d)}let c=Object.keys(l.queryData).length===0,a=[l.requestPath,c?"":"?",D(l.queryData)].join(""),{headers:h,settings:p}=l;this._stripe._requestSender._request(l.requestMethod,l.host,a,l.bodyData,l.auth,{headers:h,settings:p,streaming:l.streaming},u,(i=this.requestDataProcessor)===null||i===void 0?void 0:i.bind(this))})}};var ne=t.method,Nt=t.extend({retrieve:ne({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:ne({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:ne({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:ne({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:ne({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"})});var ie=t.method,qt=t.extend({retrieve:ie({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:ie({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:ie({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:ie({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:ie({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})});var Lt=t.method,Ht=t.extend({create:Lt({method:"POST",fullPath:"/v1/tax/calculations"}),listLineItems:Lt({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})});var He=t.method,Ut=t.extend({create:He({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:He({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:He({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:He({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})});var Ue=t.method,Ft=t.extend({deliverCard:Ue({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:Ue({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:Ue({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:Ue({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"})});var Fe=t.method,$t=t.extend({create:Fe({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:Fe({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:Fe({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:Fe({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})});var $e=t.method,jt=t.extend({create:$e({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:$e({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:$e({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:$e({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})});var ae=t.method,Vt=t.extend({create:ae({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:ae({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:ae({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:ae({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:ae({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})});var is=t.method,Bt=t.extend({create:is({method:"POST",fullPath:"/v1/terminal/connection_tokens"})});var lt=t.method,Wt=t.extend({create:lt({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:lt({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:lt({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})});var as=t.method,zt=t.extend({fundCashBalance:as({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})});var ut=t.method,Kt=t.extend({create:ut({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:ut({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:ut({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})});var le=t.method,Jt=t.extend({create:le({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:le({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:le({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:le({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:le({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})});var Yt=t.method,Qt=t.extend({retrieve:Yt({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Yt({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})});var W=t.method,Xt=t.extend({create:W({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:W({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:W({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:W({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),retrieveFeatures:W({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:W({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})});var ct=t.method,Zt=t.extend({fail:ct({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:ct({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:ct({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})});var je=t.method,er=t.extend({create:je({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:je({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:je({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:je({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})});var ue=t.method,tr=t.extend({create:ue({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:ue({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:ue({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:ue({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:ue({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})});var ht=t.method,rr=t.extend({fail:ht({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:ht({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:ht({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})});var Ve=t.method,or=t.extend({create:Ve({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:Ve({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:Ve({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:Ve({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})});var dt=t.method,sr=t.extend({fail:dt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:dt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:dt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})});var Be=t.method,nr=t.extend({create:Be({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:Be({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:Be({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:Be({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})});var ls=t.method,ir=t.extend({presentPaymentMethod:ls({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})});var G=t.method,ar=t.extend({create:G({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:G({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:G({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:G({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:G({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:G({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:G({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:G({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:G({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:G({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})});var us=t.method,lr=t.extend({create:us({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})});var ur=t.method,cr=t.extend({retrieve:ur({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:ur({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})});var cs=t.method,hr=t.extend({create:cs({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})});var dr=t.method,pr=t.extend({retrieve:dr({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:dr({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})});var hs=t.method,mr=t.extend({expire:hs({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})});var pt=t.method,fr=t.extend({create:pt({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:pt({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:pt({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})});var Pr=t.method,vr=t.extend({retrieve:Pr({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:Pr({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})});var Tr=t.method,_r=t.extend({retrieve:Tr({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:Tr({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})});var We=t.method,yr=t.extend({create:We({method:"POST",fullPath:"/v1/apps/secrets"}),list:We({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:We({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:We({method:"GET",fullPath:"/v1/apps/secrets/find"})});var ds=t.method,gr=t.extend({create:ds({method:"POST",fullPath:"/v1/billing_portal/sessions"})});var ce=t.method,Er=t.extend({create:ce({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:ce({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),list:ce({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:ce({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:ce({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})});var xr=t.method,Sr=t.extend({create:xr({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:xr({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})});var Or=t.method,Rr=t.extend({retrieve:Or({method:"GET",fullPath:"/v1/tax/settings"}),update:Or({method:"POST",fullPath:"/v1/tax/settings"})});var he=t.method,br=t.extend({create:he({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:he({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:he({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:he({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:he({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})});var Cr=t.method,wr=t.extend({retrieve:Cr({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:Cr({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})});var mt=t.method,Ar=t.extend({retrieve:mt({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:mt({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:mt({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})});var ze=t.method,Gr=t.extend({retrieve:ze({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:ze({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:ze({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:ze({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})});var Mr=t.method,Ir=t.extend({retrieve:Mr({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:Mr({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})});var Ke=t.method,kr=t.extend({create:Ke({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:Ke({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:Ke({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:Ke({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})});var de=t.method,Dr=t.extend({create:de({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:de({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:de({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:de({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:de({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})});var Nr=t.method,qr=t.extend({retrieve:Nr({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:Nr({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})});var z=t.method,Lr=t.extend({create:z({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:z({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:z({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:z({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:z({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:z({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})});var y=t.method,ft=t.extend({create:y({method:"POST",fullPath:"/v1/accounts"}),retrieve(r,...e){return typeof r=="string"?y({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[r,...e]):(r==null&&[].shift.apply([r,...e]),y({method:"GET",fullPath:"/v1/account"}).apply(this,[r,...e]))},update:y({method:"POST",fullPath:"/v1/accounts/{account}"}),list:y({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:y({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:y({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:y({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:y({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:y({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:y({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:y({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:y({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:y({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:y({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCapability:y({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:y({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:y({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:y({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:y({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:y({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})});var ps=t.method,Hr=t.extend({create:ps({method:"POST",fullPath:"/v1/account_links"})});var Je=t.method,Ur=t.extend({create:Je({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:Je({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:Je({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:Je({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})});var K=t.method,Fr=t.extend({retrieve:K({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:K({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:K({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:K({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:K({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:K({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})});var ms=t.method,$r=t.extend({retrieve:ms({method:"GET",fullPath:"/v1/balance"})});var jr=t.method,Vr=t.extend({retrieve:jr({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:jr({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})});var J=t.method,Br=t.extend({create:J({method:"POST",fullPath:"/v1/charges"}),retrieve:J({method:"GET",fullPath:"/v1/charges/{charge}"}),update:J({method:"POST",fullPath:"/v1/charges/{charge}"}),list:J({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:J({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:J({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})});var Wr=t.method,zr=t.extend({retrieve:Wr({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:Wr({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})});var pe=t.method,Kr=t.extend({create:pe({method:"POST",fullPath:"/v1/coupons"}),retrieve:pe({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:pe({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:pe({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:pe({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})});var N=t.method,Jr=t.extend({create:N({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:N({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:N({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:N({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:N({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:N({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:N({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:N({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})});var v=t.method,Yr=t.extend({create:v({method:"POST",fullPath:"/v1/customers"}),retrieve:v({method:"GET",fullPath:"/v1/customers/{customer}"}),update:v({method:"POST",fullPath:"/v1/customers/{customer}"}),list:v({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:v({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createFundingInstructions:v({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createBalanceTransaction:v({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createSource:v({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:v({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:v({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:v({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:v({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listPaymentMethods:v({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listBalanceTransactions:v({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:v({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listSources:v({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:v({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrievePaymentMethod:v({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveBalanceTransaction:v({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:v({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:v({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrieveSource:v({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:v({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:v({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:v({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:v({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:v({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:v({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})});var Ye=t.method,Qr=t.extend({retrieve:Ye({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:Ye({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:Ye({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:Ye({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})});var Xr=t.method,Zr=t.extend({create:Xr({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(r,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:Xr({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})});var eo=t.method,to=t.extend({retrieve:eo({method:"GET",fullPath:"/v1/events/{id}"}),list:eo({method:"GET",fullPath:"/v1/events",methodType:"list"})});var ro=t.method,oo=t.extend({retrieve:ro({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:ro({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})});var Qe=t.method,so=t.extend({create:Qe({method:"POST",fullPath:"/v1/file_links"}),retrieve:Qe({method:"GET",fullPath:"/v1/file_links/{link}"}),update:Qe({method:"POST",fullPath:"/v1/file_links/{link}"}),list:Qe({method:"GET",fullPath:"/v1/file_links",methodType:"list"})});var fs=(r,e,o)=>{let s=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();o["Content-Type"]=`multipart/form-data; boundary=${s}`;let n=new TextEncoder,i=new Uint8Array(0),l=n.encode(`\r
`);function u(h){let p=i,m=h instanceof Uint8Array?h:new Uint8Array(n.encode(h));i=new Uint8Array(p.length+m.length+2),i.set(p),i.set(m,p.length),i.set(l,i.length-2)}function c(h){return`"${h.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}let a=At(e);for(let h in a){let p=a[h];if(u(`--${s}`),Object.prototype.hasOwnProperty.call(p,"data")){let m=p;u(`Content-Disposition: form-data; name=${c(h)}; filename=${c(m.name||"blob")}`),u(`Content-Type: ${m.type||"application/octet-stream"}`),u(""),u(m.data)}else u(`Content-Disposition: form-data; name=${c(h)}`),u(""),u(p)}return u(`--${s}--`),i};function no(r,e,o,s){if(e=e||{},r!=="POST")return s(null,D(e));this._stripe._platformFunctions.tryBufferData(e).then(n=>{let i=fs(r,n,o);return s(null,i)}).catch(n=>s(n,null))}var Pt=t.method,io=t.extend({create:Pt({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:Pt({method:"GET",fullPath:"/v1/files/{file}"}),list:Pt({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:no});var me=t.method,ao=t.extend({create:me({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:me({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:me({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:me({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:me({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})});var S=t.method,lo=t.extend({create:S({method:"POST",fullPath:"/v1/invoices"}),retrieve:S({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:S({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:S({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:S({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),finalizeInvoice:S({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:S({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:S({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:S({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:S({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),retrieveUpcoming:S({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:S({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:S({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),voidInvoice:S({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})});var Ps=t.method,uo=t.extend({retrieve:Ps({method:"GET",fullPath:"/v1/mandates/{mandate}"})});var co=t.method,vt="connect.stripe.com",ho=t.extend({basePath:"/",authorizeUrl(r,e){r=r||{},e=e||{};let o="oauth/authorize";return e.express&&(o=`express/${o}`),r.response_type||(r.response_type="code"),r.client_id||(r.client_id=this._stripe.getClientId()),r.scope||(r.scope="read_write"),`https://${vt}/${o}?${D(r)}`},token:co({method:"POST",path:"oauth/token",host:vt}),deauthorize(r,...e){return r.client_id||(r.client_id=this._stripe.getClientId()),co({method:"POST",path:"oauth/deauthorize",host:vt}).apply(this,[r,...e])}});var A=t.method,po=t.extend({create:A({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:A({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:A({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:A({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:A({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:A({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:A({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:A({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:A({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:A({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:A({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})});var fe=t.method,mo=t.extend({create:fe({method:"POST",fullPath:"/v1/payment_links"}),retrieve:fe({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:fe({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:fe({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:fe({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})});var Y=t.method,fo=t.extend({create:Y({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Y({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Y({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Y({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Y({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Y({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})});var Q=t.method,Po=t.extend({create:Q({method:"POST",fullPath:"/v1/payouts"}),retrieve:Q({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:Q({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:Q({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:Q({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:Q({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})});var Pe=t.method,vo=t.extend({create:Pe({method:"POST",fullPath:"/v1/plans"}),retrieve:Pe({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Pe({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Pe({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Pe({method:"DELETE",fullPath:"/v1/plans/{plan}"})});var ve=t.method,To=t.extend({create:ve({method:"POST",fullPath:"/v1/prices"}),retrieve:ve({method:"GET",fullPath:"/v1/prices/{price}"}),update:ve({method:"POST",fullPath:"/v1/prices/{price}"}),list:ve({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:ve({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})});var X=t.method,_o=t.extend({create:X({method:"POST",fullPath:"/v1/products"}),retrieve:X({method:"GET",fullPath:"/v1/products/{id}"}),update:X({method:"POST",fullPath:"/v1/products/{id}"}),list:X({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:X({method:"DELETE",fullPath:"/v1/products/{id}"}),search:X({method:"GET",fullPath:"/v1/products/search",methodType:"search"})});var Xe=t.method,yo=t.extend({create:Xe({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Xe({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Xe({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Xe({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})});var M=t.method,go=t.extend({create:M({method:"POST",fullPath:"/v1/quotes"}),retrieve:M({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:M({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:M({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:M({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:M({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:M({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:M({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:M({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:M({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})});var Te=t.method,Eo=t.extend({create:Te({method:"POST",fullPath:"/v1/refunds"}),retrieve:Te({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Te({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Te({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Te({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})});var Tt=t.method,xo=t.extend({retrieve:Tt({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Tt({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Tt({method:"POST",fullPath:"/v1/reviews/{review}/approve"})});var vs=t.method,So=t.extend({list:vs({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})});var L=t.method,Oo=t.extend({create:L({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:L({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:L({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:L({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:L({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:L({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:L({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})});var Ze=t.method,Ro=t.extend({create:Ze({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:Ze({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:Ze({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:Ze({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})});var _e=t.method,bo=t.extend({create:_e({method:"POST",fullPath:"/v1/sources"}),retrieve:_e({method:"GET",fullPath:"/v1/sources/{source}"}),update:_e({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:_e({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:_e({method:"POST",fullPath:"/v1/sources/{source}/verify"})});var H=t.method,Co=t.extend({create:H({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:H({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:H({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:H({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:H({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:H({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:H({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})});var Z=t.method,wo=t.extend({create:Z({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:Z({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:Z({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:Z({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:Z({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:Z({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})});var k=t.method,Ao=t.extend({create:k({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:k({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:k({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:k({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:k({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),del:k({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:k({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:k({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:k({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})});var Go=t.method,Mo=t.extend({retrieve:Go({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:Go({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})});var et=t.method,Io=t.extend({create:et({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:et({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:et({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:et({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})});var ko=t.method,Do=t.extend({create:ko({method:"POST",fullPath:"/v1/tokens"}),retrieve:ko({method:"GET",fullPath:"/v1/tokens/{token}"})});var ye=t.method,No=t.extend({create:ye({method:"POST",fullPath:"/v1/topups"}),retrieve:ye({method:"GET",fullPath:"/v1/topups/{topup}"}),update:ye({method:"POST",fullPath:"/v1/topups/{topup}"}),list:ye({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:ye({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})});var q=t.method,qo=t.extend({create:q({method:"POST",fullPath:"/v1/transfers"}),retrieve:q({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:q({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:q({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:q({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:q({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:q({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:q({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})});var ge=t.method,Lo=t.extend({create:ge({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:ge({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:ge({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:ge({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:ge({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})});var Ts=E("apps",{Secrets:yr}),_s=E("billingPortal",{Configurations:jt,Sessions:gr}),ys=E("checkout",{Sessions:Er}),gs=E("financialConnections",{Accounts:Nt,Sessions:Sr}),Es=E("identity",{VerificationReports:qr,VerificationSessions:Lr}),xs=E("issuing",{Authorizations:qt,Cardholders:Ut,Cards:$t,Disputes:Jt,Transactions:Ar}),Ss=E("radar",{EarlyFraudWarnings:Qt,ValueListItems:kr,ValueLists:Dr}),Os=E("reporting",{ReportRuns:fr,ReportTypes:vr}),Rs=E("sigma",{ScheduledQueryRuns:_r}),bs=E("tax",{Calculations:Ht,Settings:Rr,Transactions:Gr}),Cs=E("terminal",{Configurations:Vt,ConnectionTokens:Bt,Locations:tr,Readers:ar}),ws=E("testHelpers",{Customers:zt,Refunds:mr,TestClocks:br,Issuing:E("issuing",{Cards:Ft}),Terminal:E("terminal",{Readers:ir}),Treasury:E("treasury",{InboundTransfers:Zt,OutboundPayments:rr,OutboundTransfers:sr,ReceivedCredits:lr,ReceivedDebits:hr})}),As=E("treasury",{CreditReversals:Wt,DebitReversals:Kt,FinancialAccounts:Xt,InboundTransfers:er,OutboundPayments:or,OutboundTransfers:nr,ReceivedCredits:cr,ReceivedDebits:pr,TransactionEntries:wr,Transactions:Ir});var Gs=60,tt=class r{constructor(e,o){this._stripe=e,this._maxBufferedRequestMetric=o}_addHeadersDirectlyToObject(e,o){e.requestId=o["request-id"],e.stripeAccount=e.stripeAccount||o["stripe-account"],e.apiVersion=e.apiVersion||o["stripe-version"],e.idempotencyKey=e.idempotencyKey||o["idempotency-key"]}_makeResponseEvent(e,o,s){let n=Date.now(),i=n-e.request_start_time;return Ne({api_version:s["stripe-version"],account:s["stripe-account"],idempotency_key:s["idempotency-key"],method:e.method,path:e.path,status:o,request_id:this._getRequestId(s),elapsed:i,request_start_time:e.request_start_time,request_end_time:n})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,o){return s=>{let n=s.getHeaders(),i=()=>{let u=this._makeResponseEvent(e,s.getStatusCode(),n);this._stripe._emitter.emit("response",u),this._recordRequestMetrics(this._getRequestId(n),u.elapsed)},l=s.toStream(i);return this._addHeadersDirectlyToObject(l,n),o(null,l)}}_jsonResponseHandler(e,o){return s=>{let n=s.getHeaders(),i=this._getRequestId(n),l=s.getStatusCode(),u=this._makeResponseEvent(e,l,n);this._stripe._emitter.emit("response",u),s.toJSON().then(c=>{if(c.error){let a;throw typeof c.error=="string"&&(c.error={type:c.error,message:c.error_description}),c.error.headers=n,c.error.statusCode=l,c.error.requestId=i,l===401?a=new V(c.error):l===403?a=new te(c.error):l===429?a=new B(c.error):a=g.generate(c.error),a}return c},c=>{throw new j({message:"Invalid JSON received from the Stripe API",exception:c,requestId:n["request-id"]})}).then(c=>{this._recordRequestMetrics(i,u.elapsed);let a=s.getRawResponse();this._addHeadersDirectlyToObject(a,n),Object.defineProperty(c,"lastResponse",{enumerable:!1,writable:!1,value:a}),o(null,c)},c=>o(c,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,o,s,n){return n&&o===0&&C.CONNECTION_CLOSED_ERROR_CODES.includes(n.code)?!0:o>=s?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,o=null){let s=this._stripe.getInitialNetworkRetryDelay(),n=this._stripe.getMaxNetworkRetryDelay(),i=Math.min(s*Math.pow(e-1,2),n);return i*=.5*(1+Math.random()),i=Math.max(s,i),Number.isInteger(o)&&o<=Gs&&(i=Math.max(i,o)),i*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,o){let s=this._getMaxNetworkRetries(o);return e==="POST"&&s>0?`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`:null}_makeHeaders(e,o,s,n,i,l,u){let c={Authorization:e?`Bearer ${e}`:this._stripe.getApiField("auth"),Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","User-Agent":this._getUserAgentString(),"X-Stripe-Client-User-Agent":n,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":s,"Stripe-Account":this._stripe.getApiField("stripeAccount"),"Idempotency-Key":this._defaultIdempotencyKey(i,u)},a=i=="POST"||i=="PUT"||i=="PATCH";return(a||o)&&(a||se(`${i} method had non-zero contentLength but no payload is expected for this verb`),c["Content-Length"]=o),Object.assign(Ne(c),Ct(l))}_getUserAgentString(){let e=this._stripe.getConstant("PACKAGE_VERSION"),o=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/v1 NodeBindings/${e} ${o}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,o){this._stripe.getTelemetryEnabled()&&e&&(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric?se("Request metrics buffer is full, dropping telemetry message."):this._stripe._prevRequestMetrics.push({request_id:e,request_duration_ms:o}))}_request(e,o,s,n,i,l={},u,c=null){let a,h=(d,P,T,f,_)=>setTimeout(d,this._getSleepTimeInMS(f,_),P,T,f+1),p=(d,P,T)=>{let f=l.settings&&l.settings.timeout&&Number.isInteger(l.settings.timeout)&&l.settings.timeout>=0?l.settings.timeout:this._stripe.getApiField("timeout"),_=this._stripe.getApiField("httpClient").makeRequest(o||this._stripe.getApiField("host"),this._stripe.getApiField("port"),s,e,P,a,this._stripe.getApiField("protocol"),f),x=Date.now(),O=Ne({api_version:d,account:P["Stripe-Account"],idempotency_key:P["Idempotency-Key"],method:e,path:s,request_start_time:x}),b=T||0,I=this._getMaxNetworkRetries(l.settings||{});this._stripe._emitter.emit("request",O),_.then(R=>r._shouldRetry(R,b,I)?h(p,d,P,b,R.getHeaders()["retry-after"]):l.streaming&&R.getStatusCode()<400?this._streamingResponseHandler(O,u)(R):this._jsonResponseHandler(O,u)(R)).catch(R=>{if(r._shouldRetry(null,b,I,R))return h(p,d,P,b,null);{let ee=R.code&&R.code===C.TIMEOUT_ERROR_CODE;return u(new re({message:ee?`Request aborted due to timeout being reached (${f}ms)`:r._generateConnectionErrorMessage(b),detail:R}))}})},m=(d,P)=>{if(d)return u(d);a=P,this._stripe.getClientUserAgent(T=>{var f,_;let x=this._stripe.getApiField("version"),O=this._makeHeaders(i,a.length,x,T,e,(f=l.headers)!==null&&f!==void 0?f:null,(_=l.settings)!==null&&_!==void 0?_:{});p(x,O,0)})};c?c(e,n,l.headers,m):m(null,D(n||{}))}};function _t(r){let e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(a,h,p,m,d,P){try{this.signature.verifyHeader(a,h,p,m||e.DEFAULT_TOLERANCE,d,P)}catch(f){throw f instanceof $&&(f.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),f}return a instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(a)):JSON.parse(a)},async constructEventAsync(a,h,p,m,d,P){return await this.signature.verifyHeaderAsync(a,h,p,m||e.DEFAULT_TOLERANCE,d,P),a instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(a)):JSON.parse(a)},generateTestHeaderString:function(a){if(!a)throw new g({message:"Options are required"});return a.timestamp=Math.floor(a.timestamp)||Math.floor(Date.now()/1e3),a.scheme=a.scheme||o.EXPECTED_SCHEME,a.cryptoProvider=a.cryptoProvider||c(),a.signature=a.signature||a.cryptoProvider.computeHMACSignature(a.timestamp+"."+a.payload,a.secret),["t="+a.timestamp,a.scheme+"="+a.signature].join(",")}},o={EXPECTED_SCHEME:"v1",verifyHeader(a,h,p,m,d,P){let{decodedHeader:T,decodedPayload:f,details:_,suspectPayloadType:x}=n(a,h,this.EXPECTED_SCHEME),O=/\s/.test(p);d=d||c();let b=d.computeHMACSignature(s(f,_),p);return i(f,T,_,b,m,x,O,P),!0},async verifyHeaderAsync(a,h,p,m,d,P){let{decodedHeader:T,decodedPayload:f,details:_,suspectPayloadType:x}=n(a,h,this.EXPECTED_SCHEME),O=/\s/.test(p);d=d||c();let b=await d.computeHMACSignatureAsync(s(f,_),p);return i(f,T,_,b,m,x,O,P)}};function s(a,h){return`${h.timestamp}.${a}`}function n(a,h,p){if(!a)throw new w(h,a,{message:"No webhook payload was provided."});let m=typeof a!="string"&&!(a instanceof Uint8Array),d=new TextDecoder("utf8"),P=a instanceof Uint8Array?d.decode(a):a;if(Array.isArray(h))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(h==null||h=="")throw new w(h,a,{message:"No stripe-signature header value was provided."});let T=h instanceof Uint8Array?d.decode(h):h,f=l(T,p);if(!f||f.timestamp===-1)throw new w(T,P,{message:"Unable to extract timestamp and signatures from header"});if(!f.signatures.length)throw new w(T,P,{message:"No signatures found with expected scheme"});return{decodedPayload:P,decodedHeader:T,details:f,suspectPayloadType:m}}function i(a,h,p,m,d,P,T,f){let _=!!p.signatures.filter(r.secureCompare.bind(r,m)).length,x=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://github.com/stripe/stripe-node#webhook-signing`,O=T?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!_)throw P?new w(h,a,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+x+`
`+O}):new w(h,a,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
`+x+`
`+O});let b=Math.floor((typeof f=="number"?f:Date.now())/1e3)-p.timestamp;if(d>0&&b>d)throw new w(h,a,{message:"Timestamp outside the tolerance zone"});return!0}function l(a,h){return typeof a!="string"?null:a.split(",").reduce((p,m)=>{let d=m.split("=");return d[0]==="t"&&(p.timestamp=parseInt(d[1],10)),d[0]===h&&p.signatures.push(d[1]),p},{timestamp:-1,signatures:[]})}let u=null;function c(){return u||(u=r.createDefaultCryptoProvider()),u}return e.signature=o,e}var Ho="api.stripe.com",Uo="443",Fo="/v1/",$o=Et,jo=8e4,Vo=2,Bo=.5,Ms=["name","version","url","partner_id"],Wo=["apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount"],Is=r=>new tt(r,t.MAX_BUFFERED_REQUEST_METRICS);function zo(r,e=Is){o.PACKAGE_VERSION="12.18.0",o.USER_AGENT=Object.assign({bindings_version:o.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},Gt()),o.StripeResource=t,o.resources=Ee,o.HttpClient=C,o.HttpClientResponse=U,o.CryptoProvider=F;function o(s,n={}){if(!(this instanceof o))return new o(s,n);let i=this._getPropsFromConfig(n);if(this._platformFunctions=r,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=o.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter),i.protocol&&i.protocol!=="https"&&(!i.host||/\.stripe\.com$/.test(i.host)))throw new Error("The `https` protocol must be used when sending requests to `*.stripe.com`");let l=i.httpAgent||null;this._api={auth:null,host:i.host||Ho,port:i.port||Uo,protocol:i.protocol||"https",basePath:Fo,version:i.apiVersion||$o,timeout:qe("timeout",i.timeout,jo),maxNetworkRetries:qe("maxNetworkRetries",i.maxNetworkRetries,0),agent:l,httpClient:i.httpClient||(l?this._platformFunctions.createNodeHttpClient(l):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:i.stripeAccount||null};let u=i.typescript||!1;u!==o.USER_AGENT.typescript&&(o.USER_AGENT.typescript=u),i.appInfo&&this._setAppInfo(i.appInfo),this._prepResources(),this._setApiKey(s),this.errors=Ie,this.webhooks=_t(r),this._prevRequestMetrics=[],this._enableTelemetry=i.telemetry!==!1,this._requestSender=e(this),this.StripeResource=o.StripeResource}return o.errors=Ie,o.webhooks=_t,o.createNodeHttpClient=r.createNodeHttpClient,o.createFetchHttpClient=r.createFetchHttpClient,o.createNodeCryptoProvider=r.createNodeCryptoProvider,o.createSubtleCryptoProvider=r.createSubtleCryptoProvider,o.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,_setApiKey(s){s&&this._setApiField("auth",`Bearer ${s}`)},_setAppInfo(s){if(s&&typeof s!="object")throw new Error("AppInfo must be an object.");if(s&&!s.name)throw new Error("AppInfo.name is required");s=s||{},this._appInfo=Ms.reduce((n,i)=>(typeof s[i]=="string"&&(n=n||{},n[i]=s[i]),n),void 0)},_setApiField(s,n){this._api[s]=n},getApiField(s){return this._api[s]},setClientId(s){this._clientId=s},getClientId(){return this._clientId},getConstant:s=>{switch(s){case"DEFAULT_HOST":return Ho;case"DEFAULT_PORT":return Uo;case"DEFAULT_BASE_PATH":return Fo;case"DEFAULT_API_VERSION":return $o;case"DEFAULT_TIMEOUT":return jo;case"MAX_NETWORK_RETRY_DELAY_SEC":return Vo;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return Bo}return o[s]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(s,n,i){let l=qe(s,n,i);this._setApiField(s,l)},getMaxNetworkRetryDelay(){return Vo},getInitialNetworkRetryDelay(){return Bo},getClientUserAgent(s){return this.getClientUserAgentSeeded(o.USER_AGENT,s)},getClientUserAgentSeeded(s,n){this._platformFunctions.getUname().then(i=>{var l;let u={};for(let a in s)u[a]=encodeURIComponent((l=s[a])!==null&&l!==void 0?l:"null");u.uname=encodeURIComponent(i||"UNKNOWN");let c=this.getApiField("httpClient");c&&(u.httplib=encodeURIComponent(c.getClientName())),this._appInfo&&(u.application=this._appInfo),n(JSON.stringify(u))})},getAppInfoAsString(){if(!this._appInfo)return"";let s=this._appInfo.name;return this._appInfo.version&&(s+=`/${this._appInfo.version}`),this._appInfo.url&&(s+=` (${this._appInfo.url})`),s},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let s in Ee)this[wt(s)]=new Ee[s](this)},_getPropsFromConfig(s){if(!s)return{};let n=typeof s=="string";if(!(s===Object(s)&&!Array.isArray(s))&&!n)throw new Error("Config must either be an object or a string");if(n)return{apiVersion:s};if(Object.keys(s).filter(u=>!Wo.includes(u)).length>0)throw new Error(`Config object may only contain the following: ${Wo.join(", ")}`);return s}},o}var ks=zo(new be),Gc=ks;export{ks as Stripe,Gc as default};
//# sourceMappingURL=stripe.mjs.map